<%- include("partials/header.ejs") %>

<section class="jumbotron py-4 mb-0 ">
  <div class="d-flex justify-content-center align-items-center">
    <i class="fas fa-gamepad"></i><h1>Welcome To My Games Blog!</h1>
  </div>
</section>

<div class="album pt-4 pb-5 bg-light">
  <div class="container">
    <div class="row mx-auto">
      <% games.reverse().forEach(game => { %>
      <div class="col-md-6 col-xl-4">
        <div class="card mb-4 shadow-lg">
          <img class="" src="<%= game.screenshot %>">
          <div class="card-body">
            <h5 class="textCenter"><%= game.title %></h5>
            <!-- Strip text from HTML tags -->
            <p class="card-text justify"><%= game.review.replace(/<\/?[^>]+(>|$)/g, " ").substring(0, 170) + "..." %></p>
            <div class="d-flex justify-content-between align-items-center">
              <div class="btn-group">
                <a href="/games/<%= game._id %>"><button type="button" class="btn btn-sm btn-outline-secondary">Read More</button></a>
              </div>
              <div class="textCenter">
                <small class="text-muted">
                  added <%= game.created.toLocaleDateString() %> at <%= game.created.toTimeString().substr(0,5) %>
                </small>
                <small class="text-muted">by <%= game.author.username %></small>
              </div>
            </div>
          </div>
        </div>
      </div>
      <% }); %>
    </div>
  </div>
</div>

<%- include("partials/footer.ejs") %>
